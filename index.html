<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Appels CT - 2025</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìû Dashboard d'Analyse des Appels</h1>
            <p class="subtitle">P√©riode : Janvier - D√©cembre 2025</p>
        </header>

        <!-- Section 1: Taux de Spam -->
        <section class="dashboard-section">
            <h2>üìä Taux d'Appels Spam</h2>
            <div class="chart-grid">
                <div class="chart-container">
                    <h3>√âvolution Globale du Taux de Spam</h3>
                    <canvas id="spamGlobalChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Taux de Spam par Canal</h3>
                    <canvas id="spamCanalChart"></canvas>
                </div>
            </div>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-value" id="spamGlobalRate">-</div>
                    <div class="stat-label">Taux Spam Global</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalCalls">-</div>
                    <div class="stat-label">Total d'Appels</div>
                </div>
            </div>

            <!-- Analyse Spam Pages Jaunes -->
            <div class="spam-analysis-section">
                <h3>üîç Analyse D√©taill√©e - Spam Pages Jaunes</h3>
                
                <!-- Stats rapides -->
                <div class="spam-quick-stats">
                    <div class="spam-stat-card">
                        <div class="spam-stat-value" id="spamPJTotal">-</div>
                        <div class="spam-stat-label">Total Spam</div>
                    </div>
                    <div class="spam-stat-card warning">
                        <div class="spam-stat-value" id="spamPJSuspects">-</div>
                        <div class="spam-stat-label">‚ö†Ô∏è Suspects (10-30s)</div>
                    </div>
                    <div class="spam-stat-card info">
                        <div class="spam-stat-value" id="spamPJRate">-</div>
                        <div class="spam-stat-label">Taux Spam Total</div>
                    </div>
                </div>
                
                <div class="analysis-grid">
                    <!-- Nature du spam -->
                    <div class="analysis-card">
                        <h4>Nature du Spam</h4>
                        <div id="spamNatureTable"></div>
                    </div>

                    <!-- Type de num√©ro -->
                    <div class="analysis-card">
                        <h4>Type de Num√©ro</h4>
                        <div id="spamTypeTable"></div>
                    </div>
                </div>

                <div class="analysis-grid">
                    <!-- Dur√©es moyennes -->
                    <div class="analysis-card">
                        <h4>Dur√©es Moyennes</h4>
                        <div id="spamDurees"></div>
                    </div>

                    <!-- Heures de pic -->
                    <div class="analysis-card">
                        <h4>Heures de Pic</h4>
                        <div id="spamHeuresPic"></div>
                    </div>
                </div>

                <!-- Top num√©ros -->
                <div class="analysis-card full-width">
                    <h4>Top Num√©ros Spam (>1% des appels)</h4>
                    <div id="spamTopNumeros"></div>
                </div>
            </div>
        </section>

        <!-- Section 2: Taux de D√©croch√© -->
        <section class="dashboard-section">
            <h2>‚úÖ Taux de D√©croch√© (Appels Non-Spam)</h2>
            
            <div class="filters">
                <div class="filter-group">
                    <label for="agenceFilter">Agence :</label>
                    <select id="agenceFilter">
                        <option value="all">Toutes les agences</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="canalFilter">Canal :</label>
                    <select id="canalFilter">
                        <option value="all">Tous les canaux</option>
                    </select>
                </div>
                <button id="resetFilters" class="btn-reset">R√©initialiser</button>
            </div>

            <div class="chart-container">
                <h3>√âvolution du Taux de D√©croch√© par Mois</h3>
                <canvas id="decrocheChart"></canvas>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-value" id="decrocheRate">-</div>
                    <div class="stat-label">Taux D√©croch√© Moyen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="nonSpamCalls">-</div>
                    <div class="stat-label">Appels Non-Spam</div>
                </div>
            </div>
        </section>

        <!-- Section 3: D√©croch√© par Heure -->
        <section class="dashboard-section">
            <h2>üïê Taux de D√©croch√© par Heure (Lundi - Vendredi, 8h-20h)</h2>
            <div class="chart-container large">
                <canvas id="decrocheHeureChart"></canvas>
            </div>
        </section>

        <!-- Section 4: Tableau Unique Volume + Performance -->
        <section class="dashboard-section">
            <h2>üìä Agences : Volume d'Appels et Taux de D√©croch√©</h2>
            <div class="table-controls">
                <input type="text" id="searchTable" placeholder="Rechercher une soci√©t√© ou agence..." class="search-input">
            </div>
            <div class="accordion-container" id="mainAccordion">
                <!-- Accord√©ons g√©n√©r√©s dynamiquement -->
            </div>
        </section>

        <footer>
            <p>Dashboard g√©n√©r√© le 09/12/2025 | Donn√©es : Janvier - D√©cembre 2025</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
